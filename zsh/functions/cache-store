# Store values in cache.

emulate -L zsh

local context="$1" ident="$2" cache_path
shift 2

autoload -U cache-path
cache-path -c $context $ident || return 1

for var; do
  case ${(Pt)var} in
    (*readonly*) ;;
    (*(association|array)*) print -r "$var=(${(kv@Pqq)^^var})";;
    (*)                     print -r "$var=${(Pqq)^^var}";;
  esac
done > $cache_path
