#! @ZSHELL@

local -a switches; switches=(--alternate-editor '')
[[ $TERM != dumb ]] && switches+=-t

if [[ ! -t 0 ]]; then
  local t=; t=$(mktemp e.XXXXXX) || exit 1
  {
    cat > $t
    emacsclient "$switches[@]" $* $t
  } always {
    rm $t
  }
else
  exec emacsclient "$switches[@]" $*
fi
