#! /bin/zsh

clipboard-put () {
  print -r -- $* | case $OSTYPE in
    (cygwin) putclip ;;
    (darwin*) pbcopy ;;
    (*) xclip ;;
  esac
}

clipboard-get () {
  case $OSTYPE in
    (cygwin) getclip ;;
    (darwin*) pbpaste ;;
    (*) xclip -o ;;
  esac
}

if (( $# > 0 )); then
  clipboard-put $*
elif [[ -s /dev/stdin ]]; then
  local input=
  IFS= read -d $'\0' -r input
  clipboard-put ${input%$'\n'}
else
  clipboard-get
fi
